@import "tailwindcss";
/* Tailwind v4 content sources */
@source "../index.html";
@source "./**/*.{js,ts,jsx,tsx}";

/* CSS Variables for Theme System */
:root {
  /* Light theme variables */
  --primary-background: #ffffff;
  --secondary-background: #f9fafb;
  --tertiary-background: #f3f4f6;
  --primary-text: #111827;
  --secondary-text: #6b7280;
  --tertiary-text: #9ca3af;
  --accent-color: #10b981;
  --accent-hover: #059669;
  --border-color: #e5e7eb;
  --border-focus: #d1d5db;
  --card-background: #ffffff;
  --card-border: #e5e7eb;
  --button-primary: #10b981;
  --button-primary-hover: #059669;
  --button-secondary: #6b7280;
  --button-secondary-hover: #4b5563;
  --input-background: #ffffff;
  --input-border: #d1d5db;
  --input-focus: #10b981;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  /* Fishing quality colors */
  --quality-excellent: #10b981;
  --quality-good: #3b82f6;
  --quality-average: #f59e0b;
  --quality-poor: #ef4444;
  /* Error and success colors */
  --error-background: #fef2f2;
  --error-border: #fecaca;
  --error-text: #dc2626;
  --success-background: #f0fdf4;
  --success-border: #bbf7d0;
  --success-text: #16a34a;
}

/* Ensure CSS variables are applied to all elements */
* {
  box-sizing: border-box;
}

html {
  height: 100%;
}

body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, sans-serif;
}

/* Dark theme variables - support both body.dark-theme and html.dark */
body.dark-theme,
html.dark body {
  --primary-background: #111827 !important;
  --secondary-background: #1f2937 !important;
  --tertiary-background: #374151 !important;
  --primary-text: #f9fafb !important;
  --secondary-text: #d1d5db !important;
  --tertiary-text: #9ca3af !important;
  --accent-color: #34d399 !important;
  --accent-hover: #10b981 !important;
  --border-color: #374151 !important;
  --border-focus: #4b5563 !important;
  --card-background: #1f2937 !important;
  --card-border: #374151 !important;
  --button-primary: #34d399 !important;
  --button-primary-hover: #10b981 !important;
  --button-secondary: #6b7280 !important;
  --button-secondary-hover: #9ca3af !important;
  --input-background: #374151 !important;
  --input-border: #4b5563 !important;
  --input-focus: #34d399 !important;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3) !important;
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3) !important;
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3) !important;
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3) !important;
  /* Fishing quality colors - same for both themes */
  --quality-excellent: #10b981 !important;
  --quality-good: #3b82f6 !important;
  --quality-average: #f59e0b !important;
  --quality-poor: #ef4444 !important;
  /* Error and success colors - dark theme */
  --error-background: #7f1d1d !important;
  --error-border: #991b1b !important;
  --error-text: #fca5a5 !important;
  --success-background: #14532d !important;
  --success-border: #166534 !important;
  --success-text: #86efac !important;
}

/* Ensure body element always uses CSS variables with highest specificity */
body {
  background-color: var(--primary-background) !important;
  color: var(--primary-text) !important;
}

/* Dark mode uses class strategy; html.dark enables dark: variants */

/* Base typography and smoothing */
@layer base {
    html {
        font-feature-settings: "cv02","cv03","cv04","cv11";
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    body {
        background-color: var(--primary-background) !important;
        color: var(--primary-text) !important;
        transition: background-color 0.3s ease, color 0.3s ease;
        min-height: 100vh;
    }
    h1 {
        color: var(--primary-text) !important;
        @apply font-semibold tracking-tight;
    }
    h2 {
        color: var(--primary-text) !important;
        @apply font-semibold tracking-tight;
    }
}

/* Custom styles from the original application */
@layer components {
    .form-label {
        @apply block mb-2 font-medium;
        color: var(--primary-text) !important;
    }
}

@layer components {
    .calendar-day {
        @apply min-h-[80px] cursor-pointer flex flex-col items-center justify-around p-1;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        background-color: var(--card-background) !important;
        border: 1px solid var(--card-border) !important;
        color: var(--primary-text) !important;
    }

    .calendar-day:hover {
        @apply -translate-y-0.5;
        box-shadow: var(--shadow-lg) !important;
    }

    .calendar-day-empty {
        @apply min-h-[80px] rounded-lg;
        background-color: var(--secondary-background) !important;
        border: 1px solid var(--border-color) !important;
    }

    .day-number {
        @apply text-lg font-semibold;
        color: var(--primary-text) !important;
    }

    .quality-indicator {
        @apply w-3 h-3 rounded-full mt-1;
    }
}

@layer components {
    .log-indicator {
        @apply absolute bottom-0.5 right-1 text-sm text-yellow-500 dark:text-yellow-400;
    }

    .log-indicator i {
        @apply inline-block;
        animation: fish-pulse 2s ease-in-out infinite;
    }
}

@layer components {
    .quality-excellent {
        background-color: var(--quality-excellent) !important;
    }

    .quality-good {
        background-color: var(--quality-good) !important;
    }

    .quality-average {
        background-color: var(--quality-average) !important;
    }

    .quality-poor {
        background-color: var(--quality-poor) !important;
    }

    .quality-text {
        @apply text-xs font-bold opacity-0 transition-opacity duration-200 mt-0.5;
    }

    .calendar-day:hover .quality-text {
        @apply opacity-100;
    }
}
@layer components {
    .modal-open {
        @apply overflow-hidden;
    }

    .modal {
        @apply flex items-center justify-center opacity-0 invisible transition-all duration-300;
        background-color: rgba(0, 0, 0, 0.5);
    }

    .modal.is-visible {
        @apply opacity-100 visible;
    }

    .modal > div {
        @apply opacity-0 scale-95 transition-all duration-200;
    }

    .modal.is-visible > div {
        @apply opacity-100 scale-100;
    }
}
@layer components {
    .modal-close-button {
        @apply z-50;
    }

    .moon-phase-info {
        @apply text-sm text-gray-500 mt-2;
    }

    .bite-time-item {
        @apply flex items-center mb-2;
    }

    .nav-button {
        @apply transition-all duration-200;
    }

    .nav-button:hover:not(:disabled) {
        @apply scale-105;
    }

    .nav-button:disabled {
        @apply opacity-50 cursor-not-allowed;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

@layer components {
    .fade-in {
        animation: fadeIn 0.15s ease-in-out;
    }

    .fade-out {
        animation: fadeOut 0.15s ease-in-out;
    }
}

/* Design System: Container, Card, Buttons */
@layer components {
    .container-pro { @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8; }
        .card {
            background-color: var(--card-background);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-sm);
            @apply backdrop-blur rounded-2xl;
        }
    .card-padding { @apply p-6 sm:p-8; }

            .btn {
                @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
                box-shadow: var(--shadow-sm);
            }
            .btn-primary {
                background-color: var(--button-primary);
                color: white;
                @apply hover:shadow;
            }
            .btn-primary:hover {
                background-color: var(--button-primary-hover);
            }
    .btn-secondary {
        background-color: var(--button-secondary);
        color: white;
        @apply focus-visible:ring-gray-900;
    }
    .btn-secondary:hover {
        background-color: var(--button-secondary-hover);
    }
    .btn-ghost {
        background-color: transparent;
        color: var(--primary-text);
        @apply hover:bg-gray-100 dark:hover:bg-white/10;
    }
    .btn-warning {
        background-color: #f59e0b;
        color: white;
        @apply hover:bg-amber-400 active:bg-amber-600;
    }
    .btn-danger {
        background-color: #ef4444;
        color: white;
        @apply hover:bg-red-500 active:bg-red-700;
    }
            .icon-btn {
                background-color: var(--card-background);
                border: 1px solid var(--card-border);
                color: var(--primary-text);
                box-shadow: var(--shadow-sm);
                @apply hover:shadow hover:-translate-y-0.5 transition-all rounded-full w-10 h-10 inline-flex items-center justify-center;
            }
            .icon-btn:hover {
                color: var(--accent-color);
            }
}

/* Focus visible improvements */
@layer utilities {
    .focus-ring { @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2; }
}

/* Responsive Refinements */
@layer components {
    @media (max-width: 768px) {
        .responsive-title {
            @apply text-3xl;
        }

        .responsive-month {
            @apply text-xl;
        }

        .modal > div {
            @apply max-h-[95vh];
        }
    }

    @media (max-width: 480px) {
        .responsive-container {
            @apply px-3;
        }

        .responsive-nav-button {
            @apply px-3 py-2 text-sm;
        }

        .calendar-day {
            @apply min-h-[65px];
        }

        .responsive-title {
            @apply text-2xl;
        }

        .day-number {
            @apply text-base;
        }

        .modal > div {
            @apply m-2 max-w-full;
        }
    }
}

@keyframes fish-pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

@layer components {
    .moon-info-container {
        background-color: var(--card-background) !important;
        border: 1px solid var(--card-border) !important;
        color: var(--primary-text) !important;
    }

    .best-performing-insights p {
        @apply mb-2;
    }

    .modal-content-covered {
        @apply pointer-events-none;
        transition: none !important;
        transform: scale(1) !important;
        opacity: 1 !important;
    }

    .current-day-highlight {
        box-shadow: 0 0 0 2px var(--accent-color) !important;
    }
}

/* Tackle Box specific styles */
@layer components {
    .tacklebox-form {
        @apply hidden;
    }

    .tacklebox-form.active {
        @apply block;
    }

    .data-filters-section {
        background-color: var(--secondary-background) !important;
    }

    /* Dark mode - make data filters section darker */
    body.dark-theme .data-filters-section,
    html.dark .data-filters-section {
        background-color: #111827 !important; /* Darker than modal background */
    }

    /* Dark mode - make modal headers darker than calendar background */
    body.dark-theme .modal-header,
    html.dark .modal-header,
    body.dark-theme [data-modal-header="true"],
    html.dark [data-modal-header="true"] {
        background-color: #0f172a !important; /* Much darker than card background #1f2937 */
    }
}
