Layout was forced before the page was fully loaded. If stylesheets are not yet loaded this may cause a flash of unstyled content. node.js:417:1
[vite] connecting... client:733:9
[vite] connected. client:827:12
Download the React DevTools for a better development experience: https://react.dev/link/react-devtools react-dom_client.js:17995:54
Initializing Firebase with config (dev): 
Object { projectId: "maori-fishing-calendar-react", authDomain: "maori-fishing-calendar-react.firebaseapp.com", hasApiKey: true }
firebase.ts:33:15
Firebase initialized successfully firebase.ts:44:15
[reload] first-frame: 20 ms App.tsx:235:19
üöÄ App initialized - ensuring clean modal state App.tsx:99:13
Initial modal state: none App.tsx:100:13
URL: http://localhost:5173/ App.tsx:101:13
URL hash: <empty string> App.tsx:102:13
üîç Modal state changed to: none App.tsx:219:13
Initializing database service in guest mode... DatabaseContext.tsx:32:17
Firebase Data Service initialized for guest firebaseDataService.ts:267:15
Applying theme in useEffect, isDark: false themeString: light useLocalStorage.ts:66:13
Removed dark class from html and dark-theme class from body useLocalStorage.ts:78:15
Current html classes: <empty string> useLocalStorage.ts:80:13
Current body classes: bg-gray-50 dark:bg-gray-900 dark:text-gray-100 antialiased useLocalStorage.ts:81:13
Current html data-theme: light useLocalStorage.ts:82:13
Current body data-theme: light useLocalStorage.ts:83:13
PWA detection: 
Object { isStandalone: false, isIOSPWA: false, isAndroidPWA: false, isPWA: false, userAgent: "Mozilla/5.0 (X11; Linux x86_64; rv:141.0) Gecko/20100101 Firefox/141.0" }
PWAContext.tsx:67:15
üöÄ App initialized - ensuring clean modal state App.tsx:99:13
Initial modal state: none App.tsx:100:13
URL: http://localhost:5173/ App.tsx:101:13
URL hash: <empty string> App.tsx:102:13
üîç Modal state changed to: none App.tsx:219:13
Initializing database service in guest mode... DatabaseContext.tsx:32:17
Firebase Data Service initialized for guest firebaseDataService.ts:267:15
Applying theme in useEffect, isDark: false themeString: light useLocalStorage.ts:66:13
Removed dark class from html and dark-theme class from body useLocalStorage.ts:78:15
Current html classes: <empty string> useLocalStorage.ts:80:13
Current body classes: bg-gray-50 dark:bg-gray-900 dark:text-gray-100 antialiased useLocalStorage.ts:81:13
Current html data-theme: light useLocalStorage.ts:82:13
Current body data-theme: light useLocalStorage.ts:83:13
PWA detection: 
Object { isStandalone: false, isIOSPWA: false, isAndroidPWA: false, isPWA: false, userAgent: "Mozilla/5.0 (X11; Linux x86_64; rv:141.0) Gecko/20100101 Firefox/141.0" }
PWAContext.tsx:67:15
Database context ready DatabaseContext.tsx:36:19
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 2 TackleBoxModal.tsx:35:11
‚úÖ JSZip loaded successfully browserZipImportService.ts:28:15
[reload] total: 79ms - timer ended App.tsx:62:21
[reload] ready: 79 ms App.tsx:69:19
Loading trips for month, user: guest Calendar.tsx:36:13
[enc-migration] User changed, resetting migration polling useEncryptionMigrationStatus.ts:82:13
[enc-migration] Polling disabled: no user (guest mode) useEncryptionMigrationStatus.ts:88:15
[enc-migration-pill] Pill hidden: guest mode EncryptionMigrationStatus.tsx:41:15
Loading trips for month, user: guest Calendar.tsx:36:13
[enc-migration] User changed, resetting migration polling useEncryptionMigrationStatus.ts:82:13
[enc-migration] Polling disabled: no user (guest mode) useEncryptionMigrationStatus.ts:88:15
[enc-migration-pill] Pill hidden: guest mode EncryptionMigrationStatus.tsx:41:15
Database initialized successfully. databaseService.ts:84:17
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 2 TackleBoxModal.tsx:35:11
Calendar: Found 0 trips Calendar.tsx:39:15
Checking trips for date 2025-10-13: found 0 total trips LunarModal.tsx:87:17
Trip dates: 
Array []
LunarModal.tsx:90:17
No trips for this date LunarModal.tsx:94:17
Calendar: Found 0 trips Calendar.tsx:39:15
Checking trips for date 2025-10-13: found 0 total trips LunarModal.tsx:87:17
Trip dates: 
Array []
LunarModal.tsx:90:17
No trips for this date LunarModal.tsx:94:17
[enc-migration] Polling disabled: no user (guest mode) useEncryptionMigrationStatus.ts:88:15
downloadable font: Glyph bbox was incorrect (glyph ids 1 2 3 4 5 8 9 10 11 12 13 14 16 17 19 22 24 28 32 34 35 38 39 40 43 44 45 46 47 50 51 52 53 55 56 58 60 61 62 64 67 68 70 71 72 73 74 78 79 80 81 83 90 96 101 103 104 105 108 109 115 116 117 118 120 123 125 135 138 139 140 142 143 144 145 146 148 149 154 155 157 161 162 163 164 165 169 170 171 173 179 181 193 195 203 207 208 210 211 214 218 219 223 225 227 228 229 230 235 236 237 238 239 240 245 246 247 248 249 250 251 252 253 254 255 256 257 263 264 266 268 271 275 278 279 280 281 282 283 284 285 286 287 288 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 321 335 338 339 340 342 344 345 346 353 354 356 357 358 359 362 363 365 366 371 373 374 379 381 382 383 386 389 390 391 393 394 406 407 412 413 418 419 420 424 432 433 439 448 449 450 451 454 455 456 457 472 479 480 481 482 485 486 490 491 493 499 500 501 503 508 509 513 515 516 525 527 528 532 535 541 542 543 549 550 551 552 554 555 556 558 560 569 571 593 602 603 604 607 608 609 614 615 617 618 623 626 627 643 644 645 647 650 651 654 655 656 657 662 663 664 665 670 671 672 674 675 679 680 681 682 683 698 699 708 712 714 717 718 729 730 732 735 736 739 746 747 752 761 762 767 774 776 777 778 779 788 789 790 794 796 798 799 800 801 803 804 806 826 828 829 831 835 836 838 839 840 841 842 843 844 845 848 849 856 857 861 862 863 871 873 874 880 882 892 895 900 908 911 913 925 928 929 930 933 936 937 938 941 942 943 944 945 948 949 950 952 958 960 961 962 964 966 967 969 973 974 978 979 980 981 982 989 998 1000 1001 1005 1006 1008 1009 1011 1012 1013 1016 1020 1026 1027 1031 1036 1037 1042 1045 1048 1050 1052 1053 1057 1058 1060 1063 1072 1073 1076 1084 1087 1099 1104 1110 1111 1112 1116 1117 1121 1122 1124 1131 1136 1140 1141 1142 1147 1148 1151 1157 1163 1167 1168 1170 1177 1186 1187 1193 1196 1199 1200 1201 1204 1205 1208 1211 1212 1217 1218 1220 1224 1226 1228 1230 1231 1232 1233 1235 1236 1237 1238 1243 1246 1247 1249 1251 1256 1258 1259 1260 1261 1265 1268 1269 1271 1272 1273 1275 1276 1279 1285 1289 1290 1291 1292 1296 1297 1303 1304 1305 1309 1310 1311 1312 1317 1319 1320 1324 1325 1328 1329 1330 1331 1334 1335 1337 1339 1341 1343 1356 1357 1363 1369 1371 1372 1375 1376 1377 1382 1384 1387) (font-family: "Font Awesome 6 Free" style:normal weight:900 stretch:100 src index:0) source: https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2
Auth state changed - user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 email: pulsta@gmail.com AuthContext.tsx:65:15
üîÑ Auth state actually changed, triggering immediate notifications AuthContext.tsx:68:17
Database: Auth state changed, resetting data readiness DatabaseContext.tsx:54:15
Calendar: Immediate auth state change detected 
Object { fromUser: null, toUser: "ikrn7LTIanOYkJDcMTGGkzxFoXD3", isLogin: true, isLogout: false, timestamp: 1760296801739, user: {‚Ä¶}, previousUser: null }
Calendar.tsx:98:15
Calendar: Triggering immediate indicator update Calendar.tsx:99:15
Calendar: user context: none Calendar.tsx:100:15
Calendar: current month/year: 9/2025 Calendar.tsx:101:15
Loading trips for month, user: guest Calendar.tsx:36:13
üßπ Clearing potentially preserved modal state after login AuthContext.tsx:94:17
User logging in, handling data operations in background... AuthContext.tsx:110:17
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 2 TackleBoxModal.tsx:35:11
Calendar: Found 0 trips Calendar.tsx:39:15
Loading trips for month, user: authenticated Calendar.tsx:36:13
Calendar: Performing immediate refresh for instant UI update Calendar.tsx:120:15
Loading trips for month, user: authenticated Calendar.tsx:36:13
[enc-migration] User changed, resetting migration polling useEncryptionMigrationStatus.ts:82:13
[enc-migration-pill] Pill visible: migration in progress 
Object { user: "pulsta@gmail.com", running: false, allDone: false, totalUpdated: 0, totalProcessed: 0, showPhotoMigration: false, photoProgress: null }
EncryptionMigrationStatus.tsx:58:13
üîç Modal state changed to: none App.tsx:219:13
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 2 TackleBoxModal.tsx:35:11
Auth state changed - user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 email: pulsta@gmail.com AuthContext.tsx:65:15
Calendar: Found 0 trips 2 Calendar.tsx:39:15
[enc-migration] Polling disabled: encryption not ready useEncryptionMigrationStatus.ts:92:15
[enc-migration-pill] Pill visible: migration in progress 
Object { user: "pulsta@gmail.com", running: false, allDone: false, totalUpdated: 0, totalProcessed: 0, showPhotoMigration: false, photoProgress: {‚Ä¶} }
EncryptionMigrationStatus.tsx:58:13
Background: Switching to user context... AuthContext.tsx:114:21
Switched to user mode: ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:294:15
Background: Encryption key initialized for user AuthContext.tsx:119:25
Background: Starting background encryption migration... AuthContext.tsx:122:27
[enc-migration] Migration completed successfully: 
Object { userId: "ikrn7LTIanOYkJDcMTGGkzxFoXD3", collections: {‚Ä¶}, totalProcessed: 14, totalUpdated: 14 }
firebaseDataService.ts:2126:21
[enc-migration] Migration completion event received: 
Object { userId: "ikrn7LTIanOYkJDcMTGGkzxFoXD3", status: {‚Ä¶} }
useEncryptionMigrationStatus.ts:43:15
Background: Encryption migration started successfully AuthContext.tsx:126:29
Background: Merging local guest data to Firebase... AuthContext.tsx:147:23
Starting local data merge for user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:1436:13
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 2 TackleBoxModal.tsx:35:11
[enc-migration] Encryption ready, refreshing status useEncryptionMigrationStatus.ts:77:15
[enc-migration] Starting polling useEncryptionMigrationStatus.ts:95:13
[enc-migration] Polling stopped: migration complete useEncryptionMigrationStatus.ts:98:15
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
No local data to merge. firebaseDataService.ts:1441:15
Background: Clearing local data to prevent duplicates... AuthContext.tsx:149:23
All data cleared successfully. databaseService.ts:642:17
Local data cleared, Firestore data preserved firebaseDataService.ts:1681:13
Background: Login data operations completed AuthContext.tsx:152:21
Background: User data ready - emitting calendar refresh signal AuthContext.tsx:154:21
Database: User data ready, updating data context DatabaseContext.tsx:60:15
Calendar: Database data ready signal received 
Object { userId: "ikrn7LTIanOYkJDcMTGGkzxFoXD3", timestamp: 1760296801814, isGuest: false, error: undefined }
Calendar.tsx:111:15
Calendar: Performing final indicator refresh with actual data Calendar.tsx:112:15
Loading trips for month, user: authenticated Calendar.tsx:36:13
Fetching trips from Firebase for user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:528:17
Calendar: User data ready event received 
Object { userId: "ikrn7LTIanOYkJDcMTGGkzxFoXD3", timestamp: 1760296801814, source: "AuthContext", isGuest: false }
Calendar.tsx:86:15
Calendar: user context: pulsta@gmail.com Calendar.tsx:87:15
Calendar: current month/year: 9/2025 Calendar.tsx:88:15
Calendar: Refreshing trip indicators to show user-specific data Calendar.tsx:89:15
Loading trips for month, user: authenticated Calendar.tsx:36:13
Fetching trips from Firebase for user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:528:17
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 3 4 TackleBoxModal.tsx:35:11
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 6 2 TackleBoxModal.tsx:35:11
[ID Mapping] Stored mapping: idMapping_ikrn7LTIanOYkJDcMTGGkzxFoXD3_trips_1760255171918 -> KBe7aerIBTTieJn5DC7N 2 firebaseDataService.ts:1942:13
Found 1 trips in Firebase for user ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:542:17
Calendar: Found 1 trips Calendar.tsx:39:15
Found 1 trips in Firebase for user ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:542:17
Calendar: Found 1 trips Calendar.tsx:39:15
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 6 2 TackleBoxModal.tsx:35:11
Fetching trips from Firebase for user: ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:528:17
üîç Modal state changed to: gallery App.tsx:219:13
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
[ID Mapping] Stored mapping: idMapping_ikrn7LTIanOYkJDcMTGGkzxFoXD3_trips_1760255171918 -> KBe7aerIBTTieJn5DC7N firebaseDataService.ts:1942:13
[ID Mapping] Stored mapping: idMapping_ikrn7LTIanOYkJDcMTGGkzxFoXD3_fishCaught_1760255171918-1760255197257 -> klU3bxNcBNVQ3yY0qmUP firebaseDataService.ts:1942:13
Found 1 trips in Firebase for user ikrn7LTIanOYkJDcMTGGkzxFoXD3 firebaseDataService.ts:542:17
XHROPTIONS
https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users/ikrn7LTIanOYkJDcMTGGkzxFoXD3/enc_photos/temp_1760255197299_678295be.enc
CORS Preflight Did Not Succeed

Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS preflight response did not succeed). Status code: 412.
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS request did not succeed). Status code: (null).
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
XHROPTIONS
https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users/ikrn7LTIanOYkJDcMTGGkzxFoXD3/enc_photos/temp_1760255197299_678295be.enc
CORS Preflight Did Not Succeed

Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS preflight response did not succeed). Status code: 412.
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS request did not succeed). Status code: (null).
[enc-migration-pill] Pill hidden: all migrations complete 2 EncryptionMigrationStatus.tsx:55:15
XHROPTIONS
https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users/ikrn7LTIanOYkJDcMTGGkzxFoXD3/enc_photos/temp_1760255197299_678295be.enc
CORS Preflight Did Not Succeed

Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS preflight response did not succeed). Status code: 412.
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://firebasestorage.googleapis.com/v0/b/maori-fishing-calendar-react-photos/o/users%2Fikrn7LTIanOYkJDcMTGGkzxFoXD3%2Fenc_photos%2Ftemp_1760255197299_678295be.enc. (Reason: CORS request did not succeed). Status code: (null).
[enc-migration-pill] Pill hidden: all migrations complete EncryptionMigrationStatus.tsx:55:15
App.tsx: handleCloseModal called, current modal: gallery App.tsx:211:13
App.tsx: Modal closed, set to none App.tsx:216:13
TackleBoxModal rendered - tacklebox items: 0 gearTypes: 6 2 TackleBoxModal.tsx:35:11
üîç Modal state changed to: none App.tsx:219:13
[enc-migration-pill] Pill hidden: all migrations complete 2 EncryptionMigrationStatus.tsx:55:15
